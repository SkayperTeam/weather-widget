(function(){"use strict";var t={9316:function(t,e,i){var n=i(9242),s=i(3396);function r(t,e,i,n,r,a){const o=(0,s.up)("AboutView");return(0,s.wg)(),(0,s.j4)(o)}var a=i(2006),o={components:{AboutView:a["default"]}},d=i(89);const c=(0,d.Z)(o,[["render",r]]);var l=c,g=i(2483);const h=[{path:"/",name:"about",component:()=>Promise.resolve().then(i.bind(i,2006))}],u=(0,g.p7)({history:(0,g.PO)("/"),routes:h});var v=u;(0,n.ri)(l).use(v).mount("#weather-widget")},2006:function(t,e,i){i.r(e),i.d(e,{default:function(){return nt}});var n=i(3396),s=i(7139);const r=t=>((0,n.dD)("data-v-4d427229"),t=t(),(0,n.Cn)(),t),a={class:"widget",ref:"widget"},o=r((()=>(0,n._)("img",{src:"https://skayperteam.github.io/img/widgetSettingIcon.svg",alt:"настройки"},null,-1))),d=[o],c=r((()=>(0,n._)("img",{src:"https://skayperteam.github.io/img/widgetCloseSettingIcon.svg",alt:"настройки"},null,-1))),l=[c],g={class:"widget_item_header"},h={class:"widget_item_header_title"},u={class:"widget_item_main"},v=["src","alt"],w={class:"widget_item_main_temperature"},m={class:"widget_item_text"},_={class:"widget_item_other"},p={class:"widget_item_other_first"},f={class:"widget_item_other_first_wind"},C=r((()=>(0,n._)("img",{src:"https://skayperteam.github.io/img/widgetWindIcon.svg",alt:"Ветер"},null,-1))),y={class:"widget_item_other_first_pressure"},b=r((()=>(0,n._)("img",{src:"https://skayperteam.github.io/img/widgetPressureIcon.svg",alt:"Давление"},null,-1))),D={class:"widget_item_other_second"},S={class:"widget_item_other_second_humidity"},I={class:"widget_item_other_second_visibility"},k=r((()=>(0,n._)("hr",null,null,-1)));function L(t,e,i,r,o,c){const L=(0,n.up)("WidgetSettings");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(L,{onChangeCardList:t.changeCardList,onRemoveWeatherElement:t.removeWeatherElement,weatherInCities:t.weatherInCities,settingsActive:t.settingsActive,onAddNewLocation:t.addNewLocation},null,8,["onChangeCardList","onRemoveWeatherElement","weatherInCities","settingsActive","onAddNewLocation"]),(0,n._)("button",{onClick:e[0]||(e[0]=(...e)=>t.openSettings&&t.openSettings(...e)),class:(0,s.C_)(["widget_settings",t.settingsActive?"hide":""])},d,2),(0,n._)("button",{onClick:e[1]||(e[1]=(...e)=>t.closeSettings&&t.closeSettings(...e)),class:(0,s.C_)(["widget_settings",t.settingsActive?"":"hide"])},l,2),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.weatherInCities,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{class:"widget_item",key:e},[(0,n._)("div",g,[(0,n._)("p",h,(0,s.zw)(t.name+", "+t.sys.country),1)]),(0,n._)("div",u,[(0,n._)("img",{class:"widget_item_main_weather-icon",src:`http://openweathermap.org/img/wn/${t.weather[0].icon}.png`,alt:"картинка погоды "+t.weather[0].description},null,8,v),(0,n._)("p",w,(0,s.zw)((t.main.temp-273.15).toFixed(2)+"°С"),1)]),(0,n._)("p",m,"Ощущается как "+(0,s.zw)((t.main.feels_like-273.15).toFixed(2)+"°С")+". "+(0,s.zw)(t.weather[0].description),1),(0,n._)("div",_,[(0,n._)("div",p,[(0,n._)("div",f,[C,(0,n._)("p",null,(0,s.zw)(t.wind.speed)+"м/с",1)]),(0,n._)("div",y,[b,(0,n._)("p",null,(0,s.zw)(t.main.pressure)+"гПа",1)])]),(0,n._)("div",D,[(0,n._)("div",S,[(0,n._)("p",null,"Влажность: "+(0,s.zw)(t.main.humidity)+"%",1)]),(0,n._)("div",I,[(0,n._)("p",null,"Видимость: "+(0,s.zw)((t.visibility/1e3).toFixed(1))+"км",1)])])]),k])))),128))],512)}var W=i(9242);const O=t=>((0,n.dD)("data-v-03997cc0"),t=t(),(0,n.Cn)(),t),x=O((()=>(0,n._)("div",{class:"settings_header"}," Настройки ",-1))),A={class:"settings_weathers-list"},E=["onDragstart","onDrop"],N=O((()=>(0,n._)("img",{src:"https://skayperteam.github.io/img/widgetSettingsMoveIcon.svg",alt:"изменение порядка отображения погоды"},null,-1))),$=[N],z={class:"settings_weathers-list_item_text"},Z=["onClick"],j=O((()=>(0,n._)("img",{src:"https://skayperteam.github.io/img/widgetSettingsDeleteElementIcon.svg",alt:"Удаление информации о погоде"},null,-1))),M=[j],P={class:"settings_add-location"},J=O((()=>(0,n._)("p",{class:"settings_add-location_title"},"Добавить локацию:",-1))),F=O((()=>(0,n._)("img",{src:"https://skayperteam.github.io/img/widgetSettingEnterLocationIcon.svg",alt:"Ввод"},null,-1))),H=[F];function T(t,e,i,r,a,o){return(0,n.wg)(),(0,n.iD)("div",{class:(0,s.C_)(["settings",t.settingsActive?"active":""])},[x,(0,n._)("ul",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.weatherInCities,((i,r)=>((0,n.wg)(),(0,n.iD)("li",{draggable:"true",class:"settings_weathers-list_item",key:r,onDragstart:e=>t.onDragStart(i,r),onDragleave:e[1]||(e[1]=(...e)=>t.onDragLeave&&t.onDragLeave(...e)),onDragend:e[2]||(e[2]=(...e)=>t.onDragEnd&&t.onDragEnd(...e)),onDragover:e[3]||(e[3]=(0,W.iM)(((...e)=>t.onDragOver&&t.onDragOver(...e)),["prevent"])),onDrop:(0,W.iM)((e=>t.onDrop(i,r)),["prevent"])},[(0,n._)("button",{onMousedown:e[0]||(e[0]=(...e)=>t.move&&t.move(...e)),class:"settings_weathers-list_item_move-btn"},$,32),(0,n._)("span",z,(0,s.zw)(i.name+", "+i.sys.country),1),(0,n._)("button",{onClick:e=>t.removeElement(r),class:"settings_weathers-list_item_remove-btn"},M,8,Z)],40,E)))),128))]),(0,n._)("div",P,[J,(0,n._)("form",null,[(0,n.wy)((0,n._)("input",{class:"settings_add-location_input","onUpdate:modelValue":e[4]||(e[4]=e=>t.newLocation=e),type:"text"},null,512),[[W.nr,t.newLocation]]),(0,n._)("button",{class:"settings_add-location_btn",onClick:e[5]||(e[5]=(0,W.iM)(((...e)=>t.addNewLocation&&t.addNewLocation(...e)),["prevent"]))},H)])])],2)}var Y=(0,n.aZ)({data(){return{newLocation:"",currentCard:null}},props:{settingsActive:{default:!1,type:Boolean},weatherInCities:{default:[],type:Array}},methods:{move(t){t.target.parentElement.dispatchEvent(dragstart)},ChangeCardList(t,e){this.$emit("ChangeCardList",{onDropCard:{index:e,card:t},currentCard:this.currentCard})},setCurrentCard(t,e){this.currentCard={index:e,card:t}},onDragStart(t,e){this.setCurrentCard(t,e)},onDragLeave(t){t.target.style.background="lightgray"},onDragEnd(t){t.target.style.background="lightgray"},onDragOver(t){t.target.style.background="white"},onDrop(t,e){this.ChangeCardList(t,e)},removeElement(t){this.$emit("removeWeatherElement",t)},addNewLocation(){this.$emit("addNewLocation",this.newLocation),this.newLocation=""}}}),R=i(89);const V=(0,R.Z)(Y,[["render",T],["__scopeId","data-v-03997cc0"]]);var K=V,U=i(2482),q=i(6265),B=i.n(q);const G=B().create({baseURL:"https://api.openweathermap.org"});var Q=G;class X{constructor(){(0,U.Z)(this,"token","6215be9eaeb1ed4141d9918c565a143b"),(0,U.Z)(this,"containerId","#weather-widget"),(0,U.Z)(this,"url","https://api.openweathermap.org"),(0,U.Z)(this,"coord",void 0),(0,U.Z)(this,"CurrentWeatherData",void 0)}async getCurrentWeatherData(t){await this.geocodingCity(t);let{lat:e,lon:i}=this.coord,n=Q.get(`/data/2.5/weather?lang=ru&lat=${e}&lon=${i}&appid=${this.token}`);await n.then((t=>this.CurrentWeatherData=t.data));return this.CurrentWeatherData}get getWeather(){return this.CurrentWeatherData}async geocodingCity(t){const e=Q.get(`/data/2.5/weather?q=${t}&appid=${this.token}`);await e.then((t=>this.coord=t.data.coord))}}var tt=X,et=(0,n.aZ)({components:{WidgetSettings:K},data(){return{settingsActive:!1,cities:["london","Moscow"],data:{coord:{lon:null,lat:void 0},weather:[{id:void 0,main:void 0,description:void 0,icon:void 0}],base:void 0,main:{temp:void 0,feels_like:void 0,temp_min:void 0,temp_max:void 0,pressure:void 0,humidity:void 0},visibility:void 0,wind:{speed:void 0,deg:void 0},clouds:{all:void 0},dt:void 0,sys:{type:void 0,id:void 0,message:void 0,country:void 0,sunrise:void 0,sunset:void 0},timezone:void 0,id:void 0,name:void 0,cod:void 0},weatherInCities:null}},methods:{changeCardList(t){this.weatherInCities[t.onDropCard.index]=t.currentCard.card,this.cities[t.onDropCard.index]=t.currentCard.card.name,this.weatherInCities[t.currentCard.index]=t.onDropCard.card,this.cities[t.currentCard.index]=t.onDropCard.card.name,localStorage.setItem("cities",JSON.stringify(this.cities))},openSettings(){this.$refs.widget.style.overflowY="hidden",this.settingsActive=!0},closeSettings(){this.$refs.widget.style.overflowY="auto",this.settingsActive=!1},removeWeatherElement(t){return this.weatherInCities.splice(t,1),this.cities.splice(t,1),0==this.cities.length?localStorage.removeItem("cities"):localStorage.setItem("cities",JSON.stringify(this.cities))},async addNewLocation(t){this.cities.push(t),this.weatherInCities.push(await this.getWeather(t)),localStorage.setItem("cities",JSON.stringify(this.cities))},async getWeather(t){const e=new tt;return await e.getCurrentWeatherData(t),e.getWeather},async checkHaveWeatherCities(){if(this.cities=JSON.parse(localStorage.getItem("cities")),null!=this.cities&&void 0!=this.cities&&0!=this.cities.length)for(let t=0;t<this.cities.length;t++){const e=this.cities[t];let i=await this.getWeather(e);this.weatherInCities.push(i)}else{this.cities=["Москва","Лондон"],localStorage.setItem("cities",JSON.stringify(this.cities));for(let t=0;t<this.cities.length;t++){const e=this.cities[t];let i=await this.getWeather(e);this.weatherInCities.push(i)}}}},mounted(){this.weatherInCities=[],this.checkHaveWeatherCities()}});const it=(0,R.Z)(et,[["render",L],["__scopeId","data-v-4d427229"]]);var nt=it}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.m=t,function(){var t=[];i.O=function(e,n,s,r){if(!n){var a=1/0;for(l=0;l<t.length;l++){n=t[l][0],s=t[l][1],r=t[l][2];for(var o=!0,d=0;d<n.length;d++)(!1&r||a>=r)&&Object.keys(i.O).every((function(t){return i.O[t](n[d])}))?n.splice(d--,1):(o=!1,r<a&&(a=r));if(o){t.splice(l--,1);var c=s();void 0!==c&&(e=c)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[n,s,r]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,r,a=n[0],o=n[1],d=n[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(d)var l=d(i)}for(e&&e(n);c<a.length;c++)r=a[c],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(l)},n=self["webpackChunkweather_widget"]=self["webpackChunkweather_widget"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(9316)}));n=i.O(n)})();
//# sourceMappingURL=app.b490b6dd.js.map